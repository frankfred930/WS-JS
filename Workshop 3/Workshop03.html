<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="utf-8">
    <title>Työpaja 3</title>
</head>

<body class="ws3">
    <h1>Työpaja 3: JavaScript-tapahtumat</h1>
 
    
    <h2 id="h1">Harjoitus 1</h2>
   
    <p>
        <button onclick="alert('Klikkasit minua!')">Napsauta minua</button>
        <button onclick="showTable()">Näytä taulukko</button>
    </p>
    <div id="taulukonPaikka"></div>

    
    <hr />
    <h2 id="exercise2" onmouseover="hoverExercise2()">Harjoitus 2</h2>

    
    <hr />
    <h2>Harjoitus 3</h2>
    <p>Lomake ja textarea:</p>
    <form id="sampleForm">
        <textarea id="textdata" placeholder="Kirjoita jotain..."></textarea><br>
        <span id="charcount">0/200</span> <span id="focusHint" style="display:none;">Please fill in the form with proper data.</span><br>
        <button id="sendBtn" type="submit" disabled>Lähetä</button>
    </form>

   
    <hr />
    <h2>Harjoitus 4</h2>
    <div id="coordinates">Siirrä hiirtä tämän alueen sisällä nähdäksesi koordinaatit.</div>
    <div id="coordsOutput">Koordinaatit: -</div>

    
    <hr />
    <h2>Bonus: Sijainti ja Google Maps</h2>
    <p>
        <button id="geoBtn">Näytä sijaintini ja avaa Google Maps</button>
        <span id="geoStatus"></span>
    </p>

    <script>
        
        function showTable() {
            const tableHTML = `
                <table border="1">
                    <thead>
                        <tr>
                            <th>Nimi</th>
                            <th>Tehtävä</th>
                            <th>Palkka</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Tiger Nixon</td><td>System Architect</td><td>$320,800</td></tr>
                        <tr><td>Garrett Winters</td><td>Accountant</td><td>$170,750</td></tr>
                        <tr><td>Ashton Cox</td><td>Junior Technical Author</td><td>$86,000</td></tr>
                        <tr><td>Cedric Kelly</td><td>Senior Javascript Developer</td><td>$433,060</td></tr>
                        <tr><td>Airi Satou</td><td>Accountant</td><td>$162,700</td></tr>
                    </tbody>
                </table>
            `;
            document.querySelector("#taulukonPaikka").innerHTML = tableHTML;
        }

        
        function hoverExercise2() {
            console.log("Stepped over my a mouse!");
        }
        document.querySelector("#h1").addEventListener("click", function() {
            this.style.color = "red";
            this.innerHTML = "Bye bye mouse!";
        });

        
        const textarea = document.getElementById("textdata");
        const charcount = document.getElementById("charcount");
        const focusHint = document.getElementById("focusHint");
        const sendBtn = document.getElementById("sendBtn");
        const MAX_CHARS = 200;

        textarea.addEventListener("focus", () => {
            focusHint.style.display = "inline";
        });

        textarea.addEventListener("keydown", () => {
            let len = textarea.value.length;
            charcount.innerHTML = `${len}/${MAX_CHARS}`;
            sendBtn.disabled = (len === 0 || len > MAX_CHARS);
            charcount.style.color = (len > MAX_CHARS) ? "red" : "black";
        });

        document.getElementById("sampleForm").addEventListener("submit", function(e) {
            e.preventDefault();
            if(textarea.value.trim() === "") {
                alert("Kenttä on tyhjä!");
            } else if(textarea.value.length > MAX_CHARS) {
                alert("Teksti on liian pitkä!");
            } else {
                alert("Lähetetty onnistuneesti!");
            }
        });

        
        const coordsDiv = document.getElementById("coordinates");
        const coordsOutput = document.getElementById("coordsOutput");

        coordsDiv.addEventListener("mousemove", function(e) {
            const x = e.offsetX;
            const y = e.offsetY;
            coordsOutput.innerHTML = `Koordinaatit: X=${x}, Y=${y}`;
        });

        
        document.getElementById("geoBtn").addEventListener("click", function() {
            const status = document.getElementById("geoStatus");
            if(navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    function(position) {
                        const lat = position.coords.latitude;
                        const lon = position.coords.longitude;
                        status.innerHTML = `Sijainti: ${lat}, ${lon}`;
                        window.open(`https://www.google.com/maps?q=${lat},${lon}`, "_blank");
                    },
                    function() {
                        status.innerHTML = "Sijaintia ei voitu hakea.";
                    }
                );
            } else {
                status.innerHTML = "Selaimesi ei tue Geolocation API:a.";
            }
        });
    </script>
</body>
</html>